"use strict";!function(a,c){"function"==typeof define&&(define.amd||define.cmd)?define(c):a.touch=c()}(this,function(){function a(){var a="mouseup mousedown mousemove mouseout",g="touchstart touchmove touchend touchcancel",d=c.hasTouch?g:a;d.split(" ").forEach(function(a){document.addEventListener(a,I,!1)})}var c={};c.PCevts={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseout"},c.hasTouch="ontouchstart"in window,c.getType=function(a){return Object.prototype.toString.call(a).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},c.getSelector=function(a){if(a.id)return"#"+a.id;if(a.className){var c=a.className.split(/\s+/);return"."+c.join(".")}return a===document?"body":a.tagName.toLowerCase()},c.matchSelector=function(a,c){return a.webkitMatchesSelector(c)},c.getEventListeners=function(a){return a.listeners},c.getPCevts=function(a){return this.PCevts[a]||a},c.forceReflow=function(){var a="reflowDivBlock",c=document.getElementById(a);c||(c=document.createElement("div"),c.id=a,document.body.appendChild(c));var g=c.parentNode,d=c.nextSibling;g.removeChild(c),g.insertBefore(c,d)},c.simpleClone=function(a){return Object.create(a)},c.getPosOfEvent=function(a){if(this.hasTouch){for(var c=[],g=null,d=0,e=a.touches.length;e>d;d++)g=a.touches[d],c.push({x:g.pageX,y:g.pageY});return c}return[{x:a.pageX,y:a.pageY}]},c.getDistance=function(a,c){var g=c.x-a.x,d=c.y-a.y;return Math.sqrt(g*g+d*d)},c.getFingers=function(a){return a.touches?a.touches.length:1},c.calScale=function(a,c){if(a.length>=2&&c.length>=2){var g=this.getDistance(a[1],a[0]),d=this.getDistance(c[1],c[0]);return d/g}return 1},c.getAngle=function(a,c){return 180*Math.atan2(c.y-a.y,c.x-a.x)/Math.PI},c.getAngle180=function(a,c){var g=Math.atan(-1*(c.y-a.y)/(c.x-a.x))*(180/Math.PI);return 0>g?g+180:g},c.getDirectionFromAngle=function(a){var c={up:-45>a&&a>-135,down:a>=45&&135>a,left:a>=135||-135>=a,right:a>=-45&&45>=a};for(var g in c)if(c[g])return g;return null},c.getXYByElement=function(a){for(var c=0,g=0;a.offsetParent;)c+=a.offsetLeft,g+=a.offsetTop,a=a.offsetParent;return{left:c,top:g}},c.reset=function(){T=i=E=null,q=o=y=l=!1,m=!1,f={},t=!1},c.isTouchMove=function(a){return"touchmove"===a.type||"mousemove"===a.type},c.isTouchEnd=function(a){return"touchend"===a.type||"mouseup"===a.type||"touchcancel"===a.type},c.env=function(){var a={},c=navigator.userAgent,g=c.match(/(Android)[\s\/]+([\d\.]+)/),d=c.match(/(iPad|iPhone|iPod)\s+OS\s([\d_\.]+)/),e=c.match(/(Windows\s+Phone)\s([\d\.]+)/),f=/WebKit\/[\d.]+/i.test(c),h=d?navigator.standalone?f:/Safari/i.test(c)&&!/CriOS/i.test(c)&&!/MQQBrowser/i.test(c):!1;return g&&(a.android=!0,a.version=g[2]),d&&(a.ios=!0,a.version=d[2].replace(/_/g,"."),a.ios7=/^7/.test(a.version),"iPad"===d[1]?a.ipad=!0:"iPhone"===d[1]?(a.iphone=!0,a.iphone5=568==screen.height):"iPod"===d[1]&&(a.ipod=!0)),e&&(a.wp=!0,a.version=e[2],a.wp8=/^8/.test(a.version)),f&&(a.webkit=!0),h&&(a.safari=!0),a}();var g={proxyid:0,proxies:[],trigger:function(a,c,g){g=g||{};var d,e={bubbles:!0,cancelable:!0,detail:g};try{"undefined"!=typeof CustomEvent?(d=new CustomEvent(c,e),a&&a.dispatchEvent(d)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(c,!0,!0,g),a&&a.dispatchEvent(d))}catch(f){console.warn("Touch.js is not supported by environment.")}},bind:function(a,g,d){a.listeners=a.listeners||{},a.listeners[g]?a.listeners[g].push(d):a.listeners[g]=[d];var e=function(a){c.env.ios7&&c.forceReflow(),a.originEvent=a;for(var g in a.detail)"type"!==g&&(a[g]=a.detail[g]);a.startRotate=function(){t=!0};var e=d.call(a.target,a);"undefined"==typeof e||e||(a.stopPropagation(),a.preventDefault())};d.proxy=d.proxy||{},d.proxy[g]?d.proxy[g].push(this.proxyid++):d.proxy[g]=[this.proxyid++],this.proxies.push(e),a.addEventListener&&a.addEventListener(g,e,!1)},unbind:function(a,c,g){if(g){var d=g.proxy[c];d&&d.length&&d.forEach(function(){a.removeEventListener&&a.removeEventListener(c,this.proxies[this.proxyid],!1)})}else{var e=a.listeners[c];e&&e.length&&e.forEach(function(g){a.removeEventListener(c,g,!1)})}},delegate:function(a,g,d,e){var f=function(g){var f,h;g.originEvent=g;for(var T in g.detail)"type"!==T&&(g[T]=g.detail[T]);g.startRotate=function(){t=!0};var i=c.getSelector(a)+" "+d,E=c.matchSelector(g.target,i),y=c.matchSelector(g.target,i+" "+g.target.nodeName);if(!E&&y){for(c.env.ios7&&c.forceReflow(),f=g.target;!c.matchSelector(f,i);)f=f.parentNode;h=e.call(g.target,g),"undefined"==typeof h||h||(g.stopPropagation(),g.preventDefault())}else c.env.ios7&&c.forceReflow(),(E||y)&&(h=e.call(g.target,g),"undefined"==typeof h||h||(g.stopPropagation(),g.preventDefault()))};e.proxy=e.proxy||{},e.proxy[g]?e.proxy[g].push(this.proxyid++):e.proxy[g]=[this.proxyid++],this.proxies.push(f),a.listeners=a.listeners||{},a.listeners[g]?a.listeners[g].push(f):a.listeners[g]=[f],a.addEventListener&&a.addEventListener(g,f,!1)},undelegate:function(a,c,g,d){if(d){var e=d.proxy[c];e.length&&e.forEach(function(){a.removeEventListener&&a.removeEventListener(c,this.proxies[this.proxyid],!1)})}else{var f=a.listeners[c];f.forEach(function(g){a.removeEventListener(c,g,!1)})}}},d={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,tapTime:200,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},e={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},f={start:null,move:null,end:null},h=0,T=null,i=null,E=null,y=!1,l=!1,m=!1,n={},o=!1,p=null,q=!1,r=null,s=1,t=!1,u=[],v=0,P=0,x=0,w=null,S={getAngleDiff:function(a){for(var g=parseInt(v-c.getAngle180(a[0],a[1]),10),d=0;Math.abs(g-P)>90&&d++<50;)0>P?g-=180:g+=180;return P=parseInt(g,10)},pinch:function(a){var h=a.target;if(d.pinch){if(!o)return;if(c.getFingers(a)<2&&!c.isTouchEnd(a))return;var T=c.calScale(f.start,f.move),i=this.getAngleDiff(f.move),E={type:"",originEvent:a,scale:T,rotation:i,direction:i>0?"right":"left",fingersCount:c.getFingers(a)};if(l?c.isTouchMove(a)?(E.fingerStatus="move",g.trigger(h,e.PINCH,E)):c.isTouchEnd(a)&&(E.fingerStatus="end",g.trigger(h,e.PINCH_END,E),c.reset()):(l=!0,E.fingerStatus="start",g.trigger(h,e.PINCH_START,E)),Math.abs(1-T)>d.minScaleRate){var y=c.simpleClone(E),m=1e-11;T>s?(s=T-m,g.trigger(h,e.PINCH_OUT,y,!1)):s>T&&(s=T+m,g.trigger(h,e.PINCH_IN,y,!1)),c.isTouchEnd(a)&&(s=1)}if(Math.abs(i)>d.minRotationAngle){var n,p=c.simpleClone(E);n=i>0?e.ROTATION_RIGHT:e.ROTATION_LEFT,g.trigger(h,n,p,!1),g.trigger(h,e.ROTATION,E)}}},rotateSingleFinger:function(a){var d=a.target;if(t&&c.getFingers(a)<2){if(!f.move)return;if(u.length<2){var h=c.getXYByElement(d);u=[{x:h.left+d.offsetWidth/2,y:h.top+d.offsetHeight/2},f.move[0]],v=parseInt(c.getAngle180(u[0],u[1]),10)}var T=[u[0],f.move[0]],i=this.getAngleDiff(T),E={type:"",originEvent:a,rotation:i,direction:i>0?"right":"left",fingersCount:c.getFingers(a)};c.isTouchMove(a)?E.fingerStatus="move":(c.isTouchEnd(a)||"mouseout"===a.type)&&(E.fingerStatus="end",g.trigger(d,e.PINCH_END,E),c.reset());var y=i>0?e.ROTATION_RIGHT:e.ROTATION_LEFT;g.trigger(d,y,E),g.trigger(d,e.ROTATION,E)}},swipe:function(a){var T=a.target;if(o&&f.move&&!(c.getFingers(a)>1)){var i=Date.now(),E=i-h,l=c.getDistance(f.start[0],f.move[0]),p={x:f.move[0].x-n.left,y:f.move[0].y-n.top},q=c.getAngle(f.start[0],f.move[0]),r=c.getDirectionFromAngle(q),s=E/1e3,t=10*(10-d.swipeFactor)*s*s,u={type:e.SWIPE,originEvent:a,position:p,direction:r,distance:l,distanceX:f.move[0].x-f.start[0].x,distanceY:f.move[0].y-f.start[0].y,x:f.move[0].x-f.start[0].x,y:f.move[0].y-f.start[0].y,angle:q,duration:E,fingersCount:c.getFingers(a),factor:t};if(d.swipe){var v=function(){var a=e;switch(r){case"up":g.trigger(T,a.SWIPE_UP,u);break;case"down":g.trigger(T,a.SWIPE_DOWN,u);break;case"left":g.trigger(T,a.SWIPE_LEFT,u);break;case"right":g.trigger(T,a.SWIPE_RIGHT,u)}};y?c.isTouchMove(a)?(u.fingerStatus=u.swipe="move",g.trigger(T,e.SWIPING,u),E>d.swipeTime&&E<d.swipeTime+50&&l>d.swipeMinDistance&&(v(),g.trigger(T,e.SWIPE,u,!1))):(c.isTouchEnd(a)||"mouseout"===a.type)&&(u.fingerStatus=u.swipe="end",g.trigger(T,e.SWIPE_END,u),d.swipeTime>E&&l>d.swipeMinDistance&&(v(),g.trigger(T,e.SWIPE,u,!1))):(u.fingerStatus=u.swipe="start",y=!0,g.trigger(T,e.SWIPE_START,u))}d.drag&&(m?c.isTouchMove(a)?(u.fingerStatus=u.swipe="move",g.trigger(T,e.DRAG,u)):c.isTouchEnd(a)&&(u.fingerStatus=u.swipe="end",g.trigger(T,e.DRAGEND,u)):(u.fingerStatus=u.swipe="start",m=!0,g.trigger(T,e.DRAGSTART,u)))}},tap:function(a){var T=a.target;if(d.tap){var i=Date.now(),E=i-h,y=c.getDistance(f.start[0],f.move?f.move[0]:f.start[0]);clearTimeout(p);var l=function(){if(w&&d.doubleTap&&h-x<d.maxDoubleTapInterval){var a=c.getDistance(w,f.start[0]);if(16>a)return!0}return!1}();if(l)return clearTimeout(r),void g.trigger(T,e.DOUBLE_TAP,{type:e.DOUBLE_TAP,originEvent:a,position:f.start[0]});if(d.tapMaxDistance<y)return;d.holdTime>E&&c.getFingers(a)<=1&&(q=!0,x=i,w=f.start[0],r=setTimeout(function(){g.trigger(T,e.TAP,{type:e.TAP,originEvent:a,fingersCount:c.getFingers(a),position:w})},d.tapTime))}},hold:function(a){var e=a.target;d.hold&&(clearTimeout(p),p=setTimeout(function(){if(f.start){var h=c.getDistance(f.start[0],f.move?f.move[0]:f.start[0]);d.tapMaxDistance<h||q||g.trigger(e,"hold",{type:"hold",originEvent:a,fingersCount:c.getFingers(a),position:f.start[0]})}},d.holdTime))}},I=function(a){var g=a.target;switch(a.type){case"touchstart":case"mousedown":u=[],o=!0,(!f.start||f.start.length<2)&&(f.start=c.getPosOfEvent(a)),c.getFingers(a)>=2&&(v=parseInt(c.getAngle180(f.start[0],f.start[1]),10)),h=Date.now(),T=a,n={};var d=g.getBoundingClientRect(),e=document.documentElement;n={top:d.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||0),left:d.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)},S.hold(a);break;case"touchmove":case"mousemove":if(!o||!f.start)return;f.move=c.getPosOfEvent(a),c.getFingers(a)>=2?S.pinch(a):t?S.rotateSingleFinger(a):S.swipe(a);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!o)return;E=a,l?S.pinch(a):t?S.rotateSingleFinger(a):y?S.swipe(a):S.tap(a),c.reset(),v=0,P=0,a.touches&&1===a.touches.length&&(o=!0,t=!0)}},A=function(){function a(a){c.hasTouch||(a=c.getPCevts(a)),E.forEach(function(c){g.delegate(c,a,T,h[a])})}function d(a){c.hasTouch||(a=c.getPCevts(a)),E.forEach(function(c){g.bind(c,a,h[a])})}var e,f,h,T,i=arguments;if(i.length<2||i>4)return console.error("unexpected arguments!");var E="string"===c.getType(i[0])?document.querySelectorAll(i[0]):i[0];if(E=E.length?Array.prototype.slice.call(E):[E],3===i.length&&"string"===c.getType(i[1]))return e=i[1].split(" "),f=i[2],void e.forEach(function(a){c.hasTouch||(a=c.getPCevts(a)),E.forEach(function(c){g.bind(c,a,f)})});if(3!==i.length||"object"!==c.getType(i[1]))if(2!==i.length||"object"!==c.getType(i[1])){if(4===i.length&&"object"===c.getType(i[2]))return e=i[1].split(" "),f=i[3],void e.forEach(function(a){c.hasTouch||(a=c.getPCevts(a)),E.forEach(function(c){g.bind(c,a,f)})});if(4===i.length){var y=E[0];return e=i[1].split(" "),T=i[2],f=i[3],void e.forEach(function(a){c.hasTouch||(a=c.getPCevts(a)),g.delegate(y,a,T,f)})}}else{h=i[1];for(var l in h)d(l)}else{h=i[1],T=i[2];for(var m in h)a(m)}},C=function(){var a,d,e=arguments;if(e.length<1||e.length>4)return console.error("unexpected arguments!");var f="string"===c.getType(e[0])?document.querySelectorAll(e[0]):e[0];if(f=f.length?Array.prototype.slice.call(f):[f],1===e.length||2===e.length)return void f.forEach(function(d){a=e[1]?e[1].split(" "):Object.keys(d.listeners),a.length&&a.forEach(function(a){c.hasTouch||(a=c.getPCevts(a)),g.unbind(d,a),g.undelegate(d,a)})});if(3===e.length&&"function"===c.getType(e[2]))return d=e[2],void f.forEach(function(f){a=e[1].split(" "),a.forEach(function(a){c.hasTouch||(a=c.getPCevts(a)),g.unbind(f,a,d)})});if(3===e.length&&"string"===c.getType(e[2])){var h=e[2];return void f.forEach(function(d){a=e[1].split(" "),a.forEach(function(a){c.hasTouch||(a=c.getPCevts(a)),g.undelegate(d,a,h)})})}return 4===e.length?(d=e[3],void f.forEach(function(f){a=e[1].split(" "),a.forEach(function(a){c.hasTouch||(a=c.getPCevts(a)),g.undelegate(f,a,h,d)})})):void 0},D=function(a,d,e){var f=arguments;c.hasTouch||(d=c.getPCevts(d));var h="string"===c.getType(f[0])?document.querySelectorAll(f[0]):f[0];h=h.length?Array.prototype.call(h):[h],h.forEach(function(a){g.trigger(a,d,e)})};a();var O={};return O.on=O.bind=O.live=A,O.off=O.unbind=O.die=C,O.config=d,O.trigger=D,O});